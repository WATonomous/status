(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{9299:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var n=r(3391),s=r(5893),a=r(9008),o=r(5723),c=r(7757),l=r.n(c),i=r(6156),u=r(2137);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)(l().mark((function e(){var t,r,n,s,a=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,r=new Array(t),n=0;n<t;n++)r[n]=a[n];return r[0]="https://healthchecks.io/api"+r[0],r[1]=h(h({},r[1]),{},{headers:{Accept:"application/json","X-Api-Key":"QjOgLD7b2yFA3WWjzO1ny40UM7kxk2lJ"}}),e.next=5,fetch.apply(void 0,r);case 5:return s=e.sent,e.abrupt("return",s.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=r(7294),p=r(6049),g=r(3802),j=r(6689),b=r(1945),w=r(3403),v=r(381),N=r.n(v),y=function(e,t){return"Bastion"===e?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(w.Z1,{text:"ssh <username>@bastion.watonomous.ca",language:"shell",theme:w.lf})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:(0,s.jsx)("b",{children:"Option 1: (Recommended) Teleport"})}),(0,s.jsx)(w.Z1,{text:"tsh login --proxy watonomous.teleport.sh --auth watonomous_github_connector \n tsh ssh <username>@".concat(e),language:"shell",theme:w.lf}),(0,s.jsx)("br",{}),(0,s.jsx)("h1",{children:(0,s.jsx)("b",{children:"Option 2: SSH (Requires connection to Bastion or Waterloo VPN)"})}),(0,s.jsx)("p",{children:"If using UWaterloo UWaterloo VPN:"}),(0,s.jsx)(w.Z1,{text:"# First make sure the VPN is connected. Then run: \n ssh <username>@".concat(t),language:"shell",theme:w.lf}),(0,s.jsx)("p",{children:"If using Bastion:"}),(0,s.jsx)(w.Z1,{text:"ssh -J <username>@bastion.watonomous.ca <username>@".concat(t),language:"shell",theme:w.lf})]})},O=function(e){var t=e.name,r=e.checksData,n=(e.FQDN,e.machineName),a=["Ceph"],o=(0,f.useState)(!1),c=o[0],l=o[1],i=function(){return l(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"".concat(!a.includes(t)&&"cursor-pointer"," text-white bg-gray-800 rounded-lg p-4 flex flex-col my-6"),onClick:function(){return l(!0)},children:[(0,s.jsx)("h1",{className:"text-2xl text-gray-400 font-semibold mb-1 leading-tight",children:t}),(0,s.jsx)("hr",{style:{borderColor:"gray"}}),r&&r.sort((function(e,t){var r=["SSH","GPU","filesystem capacity"];return r.indexOf(e.serviceName)-r.indexOf(t.serviceName)})).map((function(e,t){return(0,s.jsxs)("div",{className:"flex items-center my-2",children:[(0,s.jsx)("div",{className:"rounded-full flex justify-center items-center p-1 mr-4 relative z-10 ".concat({up:"bg-green-600",down:"bg-red-600",paused:"bg-gray-600",grace:"bg-yellow-600"}[e.status]),children:{up:(0,s.jsx)(p.nQG,{className:"h-3 w-3 text-white"}),down:(0,s.jsx)(p.b0D,{className:"h-3 w-3 text-white"}),paused:(0,s.jsx)(p.fpf,{className:"h-3 w-3 text-white"}),grace:(0,s.jsx)(p.$Ow,{className:"h-3 w-3 text-white"})}[e.status]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-semibold",children:e.serviceName}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,s.jsx)("span",{children:N()(e.last_ping).diff(N()(),"days")>-100?N()(e.last_ping).fromNow():N()(e.last_ping).format("DD MMMM YYYY")}),void 0!==e.last_duration&&0!==e.last_duration&&(0,s.jsxs)("span",{className:"flex items-center ml-1",children:[(0,s.jsx)(g.T39,{className:"h-3 w-3 text-gray-500 mr-1"}),e.last_duration," sec"]})]})]})]},t)}))]}),!a.includes(t)&&(0,s.jsxs)(j.Z,{size:"xl",show:c,onHide:i,children:[(0,s.jsx)(j.Z.Header,{closeButton:!0,children:(0,s.jsx)(j.Z.Title,{children:"VM Access Instructions"})}),(0,s.jsxs)(j.Z.Body,{children:["Instructions on how to access: ",(0,s.jsx)("br",{})," ",(0,s.jsx)("br",{}),y(t,n)]}),(0,s.jsx)(j.Z.Footer,{children:(0,s.jsx)(b.Z,{variant:"secondary",onClick:i,children:"Close"})})]})]})},k={"delta-ubuntu1":{FQDN:"e7-wato-vm2.uwaterloo.ca",machineName:"delta-ubuntu1.watocluster.local"},"thor-ubuntu1":{FQDN:"e7-wato-vm1.uwaterloo.ca",machineName:"thor-ubuntu1.watocluster.local"},"tr-ubuntu1":{FQDN:"e7-wato-vm9.uwaterloo.ca",machineName:"tr-ubuntu1.watocluster.local"},"wato2-ubuntu1":{FQDN:"wato-wato2.uwaterloo.ca",machineName:"wato2-ubuntu1.watocluster.local"},"wato3-ubuntu1":{FQDN:"wato-wato3.uwaterloo.ca",machineName:"wato3-ubuntu1.watocluster.local"},Bastion:{FQDN:"e7-wato-vm0.uwaterloo.ca"},Ceph:{FQDN:""}};function _(){var e=(0,f.useState)(!1),t=e[0],r=e[1],c=function(){return r(!1)},l=(0,o.ZP)("/v1/checks/",m,{refreshInterval:3e4,refreshWhenHidden:!0}),i=l.data,u=l.error,d={},h=0,x=0;return i&&i.checks.forEach((function(e){h++,"down"==e.status&&x++;var t=e.name.split(" ")[0];e.serviceName=e.name.replace("".concat(t," "),"").replace(/[()]/g,""),d[t]?d[t].items.push(e):d[t]={items:[e]}})),(0,s.jsxs)("div",{children:[(0,s.jsxs)(a.default,{children:[(0,s.jsx)("title",{children:"WATonomous Services"}),(0,s.jsx)("meta",{name:"description",content:"All your healtchecks at a glance"}),(0,s.jsx)("meta",{property:"og:title",content:"WATonomous Services"}),(0,s.jsx)("meta",{property:"og:image",content:"og_image.png"}),(0,s.jsx)("meta",{property:"og:description",content:"All your healtchecks at a glance"}),(0,s.jsx)("link",{rel:"icon",href:"/".concat(x?"favicon-error.ico":"favicon.ico")}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1 user-scalable=no"}),(0,s.jsx)("link",{rel:"apple-touch-icon",href:"apple-touch-icon.png"})]}),(0,s.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[u&&(0,s.jsxs)("div",{className:"text-center m-8",children:[(0,s.jsx)("div",{className:"bg-red-600 h-16 w-16 p-3 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,s.jsx)(p.b0D,{className:"w-full text-white"})}),(0,s.jsx)("h1",{className:"text-red-500 font-bold text-xl",children:"There was an error fetching the API"})]}),i&&(0,s.jsxs)("div",{className:"my-5",children:[(0,s.jsxs)("div",{className:"w-36 h-36 relative mx-auto my-1s",children:[(0,s.jsx)("div",{className:"rounded-full absolute inset-6 bg-gradient-to-b ".concat(x?"from-red-400 border-red-500":"from-green-400 border-green-500"," border-2 opacity-20 z-0 animate-ping-slow")}),(0,s.jsx)("div",{className:"rounded-full absolute inset-4 ".concat(x?"bg-red-400":"bg-green-400"," bg-opacity-10 z-10 animate-pulse")}),(0,s.jsx)("div",{className:"rounded-full absolute inset-6 inse bg-gradient-to-b ".concat(x?"from-red-500 to-red-600 border-red-500":"from-green-500 to-green-600 border-green-500"," border-4  z-20")})]}),(0,s.jsx)("h1",{className:"".concat(x?"text-red-500":"text-green-400"," font-bold text-center text-xl"),children:x?"".concat(x," ").concat(1==x?"error":"errors"):"".concat(h," ").concat(1==h?"check":"checks",", all fine \ud83d\ude0c")})]}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,s.jsx)("button",{className:"bg-blue-800 p-2 rounded",onClick:function(){return r(!0)},children:(0,s.jsx)("p",{className:"text-white",children:"Prerequisites"})})}),(0,s.jsxs)(j.Z,{size:"xl",show:t,onHide:c,children:[(0,s.jsx)(j.Z.Header,{closeButton:!0,children:(0,s.jsx)(j.Z.Title,{children:"VM Access Instructions"})}),(0,s.jsx)(j.Z.Body,{children:(0,s.jsxs)("p",{children:[(0,s.jsx)("b",{children:" Teleport "})," ",(0,s.jsx)("br",{}),"Please ensure you have filled out the",(0,s.jsxs)("a",{className:"text-blue-500",target:"_blank",rel:"noopener noreferrer",href:"https://forms.gle/rhT1Pe9Z43Y5Ri8P8",children:[" "," Member Form "," "]}),"first.",(0,s.jsx)("br",{})," Then,",(0,s.jsxs)("a",{className:"text-blue-500",target:"_blank",rel:"noopener noreferrer",href:"https://goteleport.com/docs/server-access/guides/tsh/",children:[" "," follow the following guide to download the CLI tool. "," "]}),(0,s.jsx)("br",{}),"If you want to set up remote development with VSCode,",(0,s.jsxs)("a",{className:"text-blue-500",target:"_blank",rel:"noopener noreferrer",href:"https://goteleport.com/docs/server-access/guides/vscode/",children:[" "," please use the following guide"]})," ",(0,s.jsx)("br",{}),(0,s.jsx)("b",{children:"Agent Forwarding"})," ",(0,s.jsx)("br",{}),(0,s.jsx)("a",{className:"text-blue-500",target:"_blank",rel:"noopener noreferrer",href:"https://docs.github.com/en/developers/overview/using-ssh-agent-forwarding",children:"Read the following guide."})]})}),(0,s.jsx)(j.Z.Footer,{children:(0,s.jsx)(b.Z,{variant:"secondary",onClick:c,children:"Close"})})]}),i&&(0,s.jsx)("div",{className:"grid gap-3 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:d&&Object.entries(d).sort((function(e,t){var r=["delta-ubuntu1","thor-ubuntu1","tr-ubuntu1","wato2-ubuntu1","wato3-ubuntu1","Bastion","Ceph"];return r.indexOf(e[0])-r.indexOf(t[0])})).map((function(e,t){var r=(0,n.Z)(e,2),a=r[0],o=r[1];return(0,s.jsx)(O,{name:a,checksData:o.items,FQDN:k[a].FQDN,machineName:k[a].machineName},t)}))})]})]})}},8581:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(9299)}])}},function(e){e.O(0,[9774,4885,8518,2888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);